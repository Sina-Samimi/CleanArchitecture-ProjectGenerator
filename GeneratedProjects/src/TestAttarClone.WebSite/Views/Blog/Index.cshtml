@model BlogListViewModel
@{
    Layout = "_HomeTemplateLayout";
    ViewData["Title"] = "مقالات و وبلاگ - عطاری آنلاین";
    ViewData["MetaDescription"] = "مقالات تخصصی در زمینه گیاهان دارویی و طب سنتی";
}

<!-- Blog Archive Section -->
<section class="blog-archive-section">
    <div class="container">
        <!-- Breadcrumb -->
        <div class="breadcrumb">
            <a asp-controller="Home" asp-action="Index">خانه</a> / 
            <span>لیست وبلاگ</span>
        </div>

        <!-- Page Header -->
        <div class="archive-header">
            <h1 class="archive-title">مقالات و وبلاگ</h1>
            <p class="archive-subtitle">مقالات تخصصی در زمینه گیاهان دارویی و طب سنتی</p>
        </div>

        <div class="blog-archive-layout">
            <!-- Sidebar Filters -->
            <aside class="blog-filters-sidebar">
                <div class="filters-card">
                    <h3 class="filters-title">🔍 جستجو</h3>
                    <div class="search-filter">
                        <input type="text" id="blog-search-input" placeholder="جستجو در مقالات..." class="search-input">
                        <button class="search-btn" onclick="performBlogSearch()">🔍</button>
                    </div>
                </div>

                <div class="filters-card">
                    <h3 class="filters-title">📂 دسته‌بندی</h3>
                    <div class="filter-group">
                        <label class="filter-checkbox">
                            <input type="checkbox" value="all" checked onchange="filterBlogs()">
                            <span>همه مقالات</span>
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" value="herbs" onchange="filterBlogs()">
                            <span>گیاهان دارویی</span>
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" value="tea" onchange="filterBlogs()">
                            <span>چای و دمنوش</span>
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" value="health" onchange="filterBlogs()">
                            <span>سلامت و تندرستی</span>
                        </label>
                    </div>
                </div>

                <div class="filters-card">
                    <h3 class="filters-title">📅 مرتب‌سازی</h3>
                    <div class="filter-group">
                        <label class="filter-checkbox">
                            <input type="radio" name="blog-sort" value="newest" checked onchange="sortBlogs()">
                            <span>جدیدترین</span>
                        </label>
                        <label class="filter-checkbox">
                            <input type="radio" name="blog-sort" value="oldest" onchange="sortBlogs()">
                            <span>قدیمی‌ترین</span>
                        </label>
                        <label class="filter-checkbox">
                            <input type="radio" name="blog-sort" value="popular" onchange="sortBlogs()">
                            <span>محبوب‌ترین</span>
                        </label>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="blog-archive-main">
                <!-- Sort and View Options -->
                <div class="archive-toolbar">
                    <div class="results-info">
                        <span id="blog-results-count">@Model.Posts.Count مقاله یافت شد</span>
                    </div>
                </div>

                <!-- Blogs Grid -->
                @if (Model.Posts.Any())
                {
                    <div class="blog-archive-grid" id="blogs-grid">
                        @foreach (var post in Model.Posts)
                        {
                            <article class="blog-archive-card">
                                <a asp-controller="Blog" asp-action="Details" asp-route-slug="@post.Slug" class="blog-archive-link">
                                    <div class="blog-archive-image">
                                        <img src="@post.HeroImageUrl" alt="@post.Title" style="width: 100%; height: 100%; object-fit: cover;" />
                                        <div class="blog-archive-category">@(post.Tags.FirstOrDefault() ?? "مقالات")</div>
                                    </div>
                                    <div class="blog-archive-content">
                                        <div class="blog-archive-meta">
                                            <span class="blog-archive-date">📅 @post.GetFormattedPublishDate()</span>
                                            <span class="blog-archive-author">👤 @post.AuthorName</span>
                                        </div>
                                        <h3 class="blog-archive-title">@post.Title</h3>
                                        <p class="blog-archive-excerpt">@post.Summary</p>
                                        <span class="blog-archive-read-more">ادامه مطلب →</span>
                                    </div>
                                </a>
                            </article>
                        }
                    </div>
                }
                else
                {
                    <div class="blog-archive-empty">
                        <p>هنوز مقاله‌ای منتشر نشده است.</p>
                    </div>
                }
            </main>
        </div>
    </div>
</section>

@section Scripts {
    <script>
        // Blog filtering and sorting functionality
        function performBlogSearch() {
            const searchTerm = document.getElementById('blog-search-input').value;
            if (searchTerm) {
                window.location.href = '@Url.Action("Index", "Blog")?search=' + encodeURIComponent(searchTerm);
            }
        }

        function filterBlogs() {
            // Client-side filtering can be implemented here
            console.log('Filter blogs');
        }

        function sortBlogs() {
            // Client-side sorting can be implemented here
            console.log('Sort blogs');
        }

        // Enter key search
        document.addEventListener('DOMContentLoaded', function() {
            const blogSearchInput = document.getElementById('blog-search-input');
            if (blogSearchInput) {
                blogSearchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        performBlogSearch();
                    }
                });
            }
        });
    </script>
}
