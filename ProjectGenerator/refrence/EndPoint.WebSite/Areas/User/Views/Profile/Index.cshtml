@using System
@model UserSettingsViewModel
@{
    ViewData["Title"] = "Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ú©Ø§Ø±Ø¨Ø±ÛŒ";
    var summary = Model.Summary;
    var displayName = string.IsNullOrWhiteSpace(summary.FullName) ? "Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯" : summary.FullName;
    var emailDisplay = string.IsNullOrWhiteSpace(summary.Email) ? "Ø§ÛŒÙ…ÛŒÙ„ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡" : summary.Email;
    var phoneDisplay = string.IsNullOrWhiteSpace(summary.PhoneNumber) ? "Ø´Ù…Ø§Ø±Ù‡ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡" : summary.PhoneNumber;
    var avatarInitial = string.IsNullOrWhiteSpace(summary.FullName) ? "?" : summary.FullName.Trim()[0].ToString();
    var avatarVersionToken = summary.LastModifiedOn.ToUnixTimeSeconds();
    string? BuildAvatarUrl(string? url)
    {
        if (string.IsNullOrWhiteSpace(url))
        {
            return null;
        }

        var separator = url.Contains('?') ? '&' : '?';
        return $"{url}{separator}v={avatarVersionToken}";
    }
    var avatarUrl = BuildAvatarUrl(summary.AvatarPath);
    var formAvatarUrl = BuildAvatarUrl(Model.UpdateProfile.AvatarPath);
    var completion = Math.Clamp(summary.CompletionPercent, 0, 100);
    var createdOn = summary.CreatedOn.ToPersianDateString();
    var lastUpdated = summary.LastModifiedOn.ToPersianDateTimeString();
    var lastUpdatedShort = summary.LastModifiedOn.ToPersianDateString();
    var membershipDays = Math.Max(1, (int)Math.Floor((DateTimeOffset.UtcNow - summary.CreatedOn).TotalDays) + 1);
    string ResolveProfileMood(int percent) => percent switch
    {
        >= 90 => "Ø¢Ù…Ø§Ø¯Ù‡ Ø¯Ø±ÛŒØ§ÙØª Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§",
        >= 60 => "Ø±Ùˆ Ø¨Ù‡ ØªÚ©Ù…ÛŒÙ„",
        _ => "Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÚ©Ù…ÛŒÙ„"
    };
    string FormatTimestamp(DateTimeOffset value) => value.ToPersianDateTimeString();
    var profileMood = ResolveProfileMood(completion);
    var activityEntries = new[]
    {
        new { Title = "Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù¾Ø±ÙˆÙØ§ÛŒÙ„", Timestamp = summary.LastModifiedOn, Context = "ÙˆØ¨ - Ø¯Ø³ØªÚ¯Ø§Ù‡ ÙØ¹Ù„ÛŒ" },
        new { Title = "ØªÚ©Ù…ÛŒÙ„ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…", Timestamp = summary.CreatedOn, Context = "Ø³Ø§Ù…Ø§Ù†Ù‡ Ø¢Ø±Ø³ÛŒØ³" }
    };

    ViewData["Subtitle"] = "Ù†Ù…Ø§ÛŒ Ú©Ù„ÛŒ Ø§Ø² Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø­Ø³Ø§Ø¨";
    ViewData["TitleSuffix"] = "Ù¾Ù†Ù„ Ú©Ø§Ø±Ø¨Ø±ÛŒ";
    ViewData["GreetingTitle"] = $"Ø³Ù„Ø§Ù…ØŒ {displayName} ğŸ‘‹";
    ViewData["GreetingSubtitle"] = "Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø®ÙˆØ¯ Ø±Ø§ Ú©Ø§Ù…Ù„ Ù†Ú¯Ù‡ Ø¯Ø§Ø±ÛŒØ¯";
    ViewData["GreetingInitial"] = avatarInitial;
    ViewData["AccountName"] = displayName;
    ViewData["AccountInitial"] = avatarInitial;
    ViewData["AccountAvatarUrl"] = avatarUrl;
    ViewData["GreetingAvatarUrl"] = avatarUrl;
    ViewData["SearchPlaceholder"] = "Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ù¾Ù†Ù„ Ú©Ø§Ø±Ø¨Ø±ÛŒ";
    ViewData["ShowSearch"] = false;
    ViewData["AccountEmail"] = summary.Email;
    ViewData["AccountPhone"] = summary.PhoneNumber;
    ViewData["Sidebar:Email"] = emailDisplay;
    ViewData["Sidebar:Phone"] = phoneDisplay;
    ViewData["Sidebar:Completion"] = completion;
}

<div class="profile-dashboard" data-profile>
    <div class="row g-4">
        <div class="col-12">
            <div class="app-card profile-hero">
                <div class="profile-hero__top">
                    <div class="profile-hero__identity">
                        <div class="profile-hero__avatar" aria-hidden="true">
                            @if (!string.IsNullOrWhiteSpace(avatarUrl))
                            {
                                <img src="@avatarUrl" alt="@displayName" />
                            }
                            else
                            {
                                <span>@avatarInitial</span>
                            }
                        </div>
                        <div>
                            <span class="profile-hero__eyebrow">Ù¾Ù†Ù„ Ú©Ø§Ø±Ø¨Ø±ÛŒ</span>
                            <h1 class="profile-hero__title">@displayName</h1>
                            <div class="profile-hero__meta" aria-label="Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³">
                                <div class="profile-hero__meta-item">
                                    <i class="bi bi-envelope"></i>
                                    <span>@emailDisplay</span>
                                </div>
                                <div class="profile-hero__meta-item">
                                    <i class="bi bi-phone"></i>
                                    <span>@phoneDisplay</span>
                                </div>
                            </div>
                            <div class="profile-hero__timeline">
                                <div>
                                    <span>Ø¹Ø¶ÙˆÛŒØª Ø§Ø²</span>
                                    <strong>@createdOn</strong>
                                </div>
                                <div>
                                    <span>Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ</span>
                                    <strong>@lastUpdated</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="profile-hero__actions">
                        <a class="btn btn-primary" style="color:white" href="#profileForm" data-scroll-anchor>
                            <i class="bi bi-pencil-square"></i>
                            <span>ÙˆÛŒØ±Ø§ÛŒØ´ Ù¾Ø±ÙˆÙØ§ÛŒÙ„</span>
                        </a>
                        <a class="btn btn-outline-primary" href="#accountSummary" data-scroll-anchor>
                            <i class="bi bi-card-list"></i>
                            <span>Ø¬Ø²Ø¦ÛŒØ§Øª Ø­Ø³Ø§Ø¨</span>
                        </a>
                    </div>
                </div>
                <div class="row g-3 profile-hero__stats" aria-label="Ø¢Ù…Ø§Ø± Ø­Ø³Ø§Ø¨">
                    <div class="col-12 col-md-4">
                        <div class="profile-stat">
                            <span class="profile-stat__label">Ø¯Ø±ØµØ¯ ØªÚ©Ù…ÛŒÙ„</span>
                            <strong class="profile-stat__value">@completion%</strong>
                            <small class="profile-stat__note">@profileMood</small>
                        </div>
                    </div>
                    <div class="col-12 col-md-4">
                        <div class="profile-stat">
                            <span class="profile-stat__label">Ø±ÙˆØ²Ù‡Ø§ÛŒ Ù‡Ù…Ø±Ø§Ù‡ÛŒ</span>
                            <strong class="profile-stat__value">@membershipDays</strong>
                            <small class="profile-stat__note">Ø§Ø² @createdOn</small>
                        </div>
                    </div>
                    <div class="col-12 col-md-4">
                        <div class="profile-stat">
                            <span class="profile-stat__label">Ø¢Ø®Ø±ÛŒÙ† ÙˆØ±ÙˆØ¯</span>
                            <strong class="profile-stat__value">@lastUpdatedShort</strong>
                            <small class="profile-stat__note">ÙˆØ±ÙˆØ¯ Ø¨Ø§ Ú©Ø¯ ÛŒÚ©â€ŒØ¨Ø§Ø±Ù…ØµØ±Ù</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        @await Html.PartialAsync("_StatusMessage")

        <div class="col-12 col-lg-8">
            <div class="row g-4">
                <div class="col-12">
                    <div id="profileForm" class="app-card profile-card profile-card--form">
                        <div class="profile-card__header">
                            <div>
                                <h2>Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±ÛŒ</h2>
                                <p>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø­Ø³Ø§Ø¨ Ø®ÙˆØ¯ Ø±Ø§ ØªØ§Ø²Ù‡ Ù†Ú¯Ù‡ Ø¯Ø§Ø±ÛŒØ¯ ØªØ§ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ø§Ø³ØªØ¹Ø¯Ø§Ø¯ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ±ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†ÛŒØ¯.</p>
                            </div>
                            <span class="profile-card__timestamp">Ø¢Ø®Ø±ÛŒÙ† ÙˆÛŒØ±Ø§ÛŒØ´: @lastUpdated</span>
                        </div>

                        <form asp-action="UpdateProfile" method="post" enctype="multipart/form-data" class="profile-form">
                            @Html.AntiForgeryToken()
                            <div asp-validation-summary="ModelOnly" class="alert alert-danger" role="alert"></div>
                            <div class="row g-4 align-items-start">
                                <div class="col-12 col-md-4">
                                    <label class="form-label" asp-for="UpdateProfile.Avatar">ØªØµÙˆÛŒØ± Ù¾Ø±ÙˆÙØ§ÛŒÙ„</label>
                                    <div class="profile-avatar-upload">
                                        <div class="profile-avatar-upload__preview">
                                            @if (!string.IsNullOrWhiteSpace(formAvatarUrl))
                                            {
                                                <img src="@formAvatarUrl" alt="ØªØµÙˆÛŒØ± ÙØ¹Ù„ÛŒ" />
                                            }
                                            else if (!string.IsNullOrWhiteSpace(avatarUrl))
                                            {
                                                <img src="@avatarUrl" alt="@displayName" />
                                            }
                                            else
                                            {
                                                <span>@avatarInitial</span>
                                            }
                                        </div>
                                        <input asp-for="UpdateProfile.Avatar" type="file" accept=".png,.jpg,.jpeg,.webp" class="form-control" />
                                        <small class="text-muted d-block mt-2">ÙØ±Ù…Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ø¬Ø§Ø²: png, jpg, jpeg, webp - Ø­Ø¯Ø§Ú©Ø«Ø± 2 Ù…Ú¯Ø§Ø¨Ø§ÛŒØª</small>
                                        <span asp-validation-for="UpdateProfile.Avatar" class="text-danger"></span>
                                    </div>
                                    <input type="hidden" asp-for="UpdateProfile.AvatarPath" />
                                    <input type="hidden" asp-for="UpdateProfile.UserId" />
                                </div>
                                <div class="col-12 col-md-8">
                                    <div class="row g-3">
                                        <div class="col-12">
                                            <label class="form-label" asp-for="UpdateProfile.FullName"></label>
                                            <input asp-for="UpdateProfile.FullName" class="form-control" autocomplete="name" />
                                            <span asp-validation-for="UpdateProfile.FullName" class="text-danger"></span>
                                        </div>
                                        <div class="col-12 col-md-6">
                                            <label class="form-label" asp-for="UpdateProfile.Email"></label>
                                            <input asp-for="UpdateProfile.Email" class="form-control" autocomplete="email" placeholder="example@gmail.com" />
                                            <span asp-validation-for="UpdateProfile.Email" class="text-danger"></span>
                                        </div>
                                        <div class="col-12 col-md-6">
                                            <label class="form-label" asp-for="UpdateProfile.PhoneNumber"></label>
                                            <input asp-for="UpdateProfile.PhoneNumber" class="form-control" inputmode="tel" maxlength="11" />
                                            <span asp-validation-for="UpdateProfile.PhoneNumber" class="text-danger"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="profile-form__footer">
                                <button type="submit" class="btn btn-primary">Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª</button>
                                <p class="text-muted mb-0">Ø¯Ø± ØµÙˆØ±Øª ØªØºÛŒÛŒØ± Ø´Ù…Ø§Ø±Ù‡ Ù‡Ù…Ø±Ø§Ù‡ØŒ Ø¨Ø±Ø§ÛŒ ÙˆØ±ÙˆØ¯ Ú©Ø¯ ÛŒÚ©â€ŒØ¨Ø§Ø±Ù…ØµØ±Ù Ø¯Ø±ÛŒØ§ÙØª Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯.</p>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="col-12">
                    <div id="accountSummary" class="app-card profile-card">
                        <div class="profile-card__header">
                            <div>
                                <h2>Ø¬Ø²Ø¦ÛŒØ§Øª Ø­Ø³Ø§Ø¨</h2>
                                <p>Ù…Ø±ÙˆØ±ÛŒ Ø³Ø±ÛŒØ¹ Ø¨Ø± Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø°Ø®ÛŒØ±Ù‡â€ŒØ´Ø¯Ù‡ Ùˆ ÙˆØ¶Ø¹ÛŒØª Ø§Ù…Ù†ÛŒØª Ø­Ø³Ø§Ø¨.</p>
                            </div>
                        </div>
                        <div class="profile-details-grid">
                            <div class="profile-details-card">
                                <h3>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø§ÛŒÙ‡</h3>
                                <dl>
                                    <div>
                                        <dt>Ù†Ø§Ù… Ú©Ø§Ù…Ù„</dt>
                                        <dd>@displayName</dd>
                                    </div>
                                    <div>
                                        <dt>Ø§ÛŒÙ…ÛŒÙ„</dt>
                                        <dd>@emailDisplay</dd>
                                    </div>
                                    <div>
                                        <dt>Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³</dt>
                                        <dd>@phoneDisplay</dd>
                                    </div>
                                </dl>
                            </div>
                            <div class="profile-details-card">
                                <h3>Ø§Ù…Ù†ÛŒØª Ùˆ Ø¯Ø³ØªØ±Ø³ÛŒ</h3>
                                <dl>
                                    <div>
                                        <dt>Ø±ÙˆØ´ ÙˆØ±ÙˆØ¯</dt>
                                        <dd>Ú©Ø¯ ÛŒÚ©â€ŒØ¨Ø§Ø±Ù…ØµØ±Ù Ù¾ÛŒØ§Ù…Ú©ÛŒ</dd>
                                    </div>
                                    <div>
                                        <dt>ØªØ§Ø±ÛŒØ® Ø§ÛŒØ¬Ø§Ø¯ Ø­Ø³Ø§Ø¨</dt>
                                        <dd>@createdOn</dd>
                                    </div>
                                    <div>
                                        <dt>Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ</dt>
                                        <dd>@lastUpdated</dd>
                                    </div>
                                </dl>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-12">
                    <div class="app-card profile-card">
                        <div class="profile-card__header">
                            <div>
                                <h2>Ú¯Ø²Ø§Ø±Ø´ ÙØ¹Ø§Ù„ÛŒØª</h2>
                                <p>Ø±Ø®Ø¯Ø§Ø¯Ù‡Ø§ÛŒ Ø§Ø®ÛŒØ± Ø­Ø³Ø§Ø¨ Ø¨Ø±Ø§ÛŒ Ø±Ø¯ÛŒØ§Ø¨ÛŒ ØªØºÛŒÛŒØ±Ø§Øª Ùˆ ÙˆØ±ÙˆØ¯Ù‡Ø§.</p>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-borderless align-middle profile-activity-table" aria-label="Ú¯Ø²Ø§Ø±Ø´ ÙØ¹Ø§Ù„ÛŒØª Ø­Ø³Ø§Ø¨">
                                <thead>
                                    <tr>
                                        <th scope="col">Ø²Ù…Ø§Ù†</th>
                                        <th scope="col">Ø´Ø±Ø­</th>
                                        <th scope="col">Ù…Ø±Ø¬Ø¹</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var entry in activityEntries)
                                    {
                                        <tr>
                                            <td>@FormatTimestamp(entry.Timestamp)</td>
                                            <td>@entry.Title</td>
                                            <td>@entry.Context</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12 col-lg-4">
            <div class="app-card profile-side-card">
                <div class="profile-side-card__header">
                    <div>
                        <h2>Ù¾ÛŒØ´Ø±ÙØª Ù¾Ø±ÙˆÙØ§ÛŒÙ„</h2>
                        <p>Ø¨Ø§ ØªÚ©Ù…ÛŒÙ„ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø³ØªØ±Ø³ÛŒ Ø³Ø±ÛŒØ¹â€ŒØªØ± Ø¨Ù‡ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ Ø®ÙˆØ§Ù‡ÛŒØ¯ Ø¯Ø§Ø´Øª.</p>
                    </div>
                    <span class="profile-side-card__badge" style="font-size:14px;">@profileMood</span>
                </div>
                <div class="profile-progress" role="img" aria-label="@($"Ø¯Ø±ØµØ¯ ØªÚ©Ù…ÛŒÙ„ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ {completion}")">
                    <div class="progress profile-progress__bar">
                        <div class="progress-bar" style="width: @completion%" aria-valuemin="0" aria-valuemax="100" aria-valuenow="@completion">@completion%</div>
                    </div>
                    <div class="profile-progress__meta">
                        <div>
                            <span>Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ</span>
                            <strong>@lastUpdatedShort</strong>
                        </div>
                        <div>
                            <span>Ø±ÙˆØ²Ù‡Ø§ÛŒ Ù‡Ù…Ø±Ø§Ù‡ÛŒ</span>
                            <strong>@membershipDays</strong>
                        </div>
                    </div>
                </div>
                <ul class="profile-tips" aria-label="Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ù‡Ø§ÛŒ ØªÚ©Ù…ÛŒÙ„ Ù¾Ø±ÙˆÙØ§ÛŒÙ„">
                    <li>
                        <i class="bi bi-check-circle"></i>
                        <span>Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù‡â€ŒØ±ÙˆØ² Ù†Ú¯Ù‡ Ø¯Ø§Ø±ÛŒØ¯.</span>
                    </li>
                    <li>
                        <i class="bi bi-check-circle"></i>
                        <span>Ø¨Ø±Ø§ÛŒ Ø§Ù…Ù†ÛŒØª Ø¨ÛŒØ´ØªØ± Ø§Ø² Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø·Ù…Ø¦Ù† ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯.</span>
                    </li>
                </ul>
            </div>

            <div class="app-card profile-side-card" style="margin-top: var(--bs-gutter-y);">
                <div class="profile-side-card__header">
                    <div>
                        <h2>Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ</h2>
                        <p>Ø¯Ø± ØµÙˆØ±Øª Ø¨Ø±ÙˆØ² Ù…Ø´Ú©Ù„ ØªÛŒÙ… Ù…Ø§ Ù‡Ù…Ø±Ø§Ù‡ Ø´Ù…Ø§Ø³Øª.</p>
                    </div>
                </div>
                <div class="profile-support">
                    <i class="bi bi-headset"></i>
                    <div>
                        <strong>Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø¢Ø±Ø³ÛŒØ³</strong>
                        <p>ØªÙ…Ø§Ø³: 021-00000000</p>
                        <p>Ø§ÛŒÙ…ÛŒÙ„: support@arsis.com</p>
                    </div>
                </div>
                <a href="tel:02100000000" class="btn btn-outline-primary w-100">ØªÙ…Ø§Ø³ Ø¨Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ</a>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{ await Html.RenderPartialAsync("_ValidationScriptsPartial"); }
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var phoneInput = document.querySelector('[name="UpdateProfile.PhoneNumber"]');
            if (phoneInput) {
                var normalisePhone = function (value) {
                    if (!value) {
                        return '';
                    }

                    var digits = value.replace(/\D+/g, '');

                    if (digits.startsWith('0098')) {
                        digits = digits.substring(4);
                    }

                    if (digits.startsWith('98') && digits.length >= 12) {
                        digits = digits.substring(2);
                    }

                    if (digits.startsWith('9') && digits.length === 10) {
                        digits = '0' + digits;
                    }

                    if (digits.length > 11 && digits.startsWith('0')) {
                        digits = digits.slice(-11);
                    }

                    if (digits.length === 11 && digits.startsWith('09')) {
                        return digits;
                    }

                    return value.replace(/\D+/g, '');
                };

                var sanitiseInput = function () {
                    var digits = phoneInput.value.replace(/\D+/g, '');
                    if (phoneInput.value !== digits) {
                        var caret = phoneInput.selectionStart;
                        phoneInput.value = digits;
                        if (typeof phoneInput.setSelectionRange === 'function' && typeof caret === 'number') {
                            var next = Math.min(caret, digits.length);
                            phoneInput.setSelectionRange(next, next);
                        }
                    }
                };

                phoneInput.addEventListener('input', sanitiseInput);
                phoneInput.addEventListener('blur', function () {
                    phoneInput.value = normalisePhone(phoneInput.value);
                });

                phoneInput.value = normalisePhone(phoneInput.value);
            }

            document.querySelectorAll('[data-scroll-anchor]').forEach(function (link) {
                link.addEventListener('click', function (event) {
                    var href = link.getAttribute('href');
                    if (!href || !href.startsWith('#')) {
                        return;
                    }

                    var target = document.querySelector(href);
                    if (!target) {
                        return;
                    }

                    event.preventDefault();
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                });
            });
        });
    </script>
}
