@model WalletChargeFormViewModel
@{
    ViewData["Title"] ??= "Ø´Ø§Ø±Ú˜ Ú©ÛŒÙ Ù¾ÙˆÙ„ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†";
    ViewData["Subtitle"] ??= "Ø§ÙØ²ÙˆØ¯Ù† Ø§Ø¹ØªØ¨Ø§Ø± Ø¨Ù‡ Ú©ÛŒÙ Ù¾ÙˆÙ„ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù‡Ù…Ø±Ø§Ù‡ Ø¨Ø§ Ø«Ø¨Øª ÙØ§Ú©ØªÙˆØ±";
}

@section Breadcrumb {
    <li class="breadcrumb-item"><a asp-area="Admin" asp-controller="Dashboard" asp-action="Index">Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</a></li>
    <li class="breadcrumb-item"><a asp-area="Admin" asp-controller="Invoices" asp-action="Index">ÙØ§Ú©ØªÙˆØ±Ù‡Ø§</a></li>
    <li class="breadcrumb-item active" aria-current="page">@ViewData["Title"]</li>
}

@await Html.PartialAsync("_StatusMessage")

<div class="wallet-charge" data-wallet-charge-form>
    <div class="row g-4">
        <div class="col-12 col-lg-8">
            <div class="card shadow-sm border-0">
                <div class="card-body p-4">
                    <div class="d-flex flex-column flex-lg-row justify-content-between align-items-start gap-3 mb-4">
                        <div>
                            <h1 class="h3 mb-2">@ViewData["Title"]</h1>
                            <p class="text-muted mb-0">@ViewData["Subtitle"]</p>
                        </div>
                        <div class="d-flex gap-2">
                            <a asp-area="Admin" asp-controller="Invoices" asp-action="Index" class="btn btn-outline-secondary">
                                <i class="bi bi-receipt"></i>
                                Ù…Ø¯ÛŒØ±ÛŒØª ÙØ§Ú©ØªÙˆØ±Ù‡Ø§
                            </a>
                        </div>
                    </div>

                    <form asp-area="Admin" asp-controller="Wallets" asp-action="Charge" method="post" class="row g-3" novalidate>
                        @Html.AntiForgeryToken()
                        <div class="col-12">
                            <div class="form-floating">
                                <select class="form-select"
                                        asp-for="UserId"
                                        asp-items="Model.UserOptions"
                                        data-control="select2"
                                        data-placeholder="Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø± Ø³ÛŒØ³ØªÙ…"
                                        data-allow-clear="true"
                                        data-dropdown-parent="[data-wallet-charge-form]"
                                        data-wallet-user-select>
                                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø± Ø³ÛŒØ³ØªÙ…</option>
                                </select>
                                <label asp-for="UserId"></label>
                            </div>
                            <span class="text-danger" asp-validation-for="UserId"></span>
                        </div>

                        <div class="col-md-4">
                            <div class="form-floating">
                                <input asp-for="Amount" class="form-control" type="number" min="0" placeholder="Ù…Ø¨Ù„Øº" />
                                <label asp-for="Amount"></label>
                            </div>
                            <span class="text-danger" asp-validation-for="Amount"></span>
                        </div>

                        <div class="col-md-4">
                            <div class="form-floating">
                                <input asp-for="Currency" class="form-control" placeholder="ÙˆØ§Ø­Ø¯ Ù¾ÙˆÙ„" />
                                <label asp-for="Currency"></label>
                            </div>
                            <span class="text-danger" asp-validation-for="Currency"></span>
                        </div>

                        <div class="col-md-4">
                            <div class="form-floating">
                                <select asp-for="PaymentMethod" class="form-select" asp-items="Model.PaymentMethodOptions">
                                </select>
                                <label asp-for="PaymentMethod"></label>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-floating">
                                <input asp-for="InvoiceTitle" class="form-control" placeholder="Ø¹Ù†ÙˆØ§Ù† ÙØ§Ú©ØªÙˆØ±" />
                                <label asp-for="InvoiceTitle"></label>
                            </div>
                            <span class="text-danger" asp-validation-for="InvoiceTitle"></span>
                        </div>

                        <div class="col-md-6">
                            <div class="form-floating">
                                <input asp-for="PaymentReference" class="form-control" placeholder="Ø´Ù†Ø§Ø³Ù‡ Ù…Ø±Ø¬Ø¹ Ù¾Ø±Ø¯Ø§Ø®Øª" />
                                <label asp-for="PaymentReference"></label>
                            </div>
                            <span class="text-danger" asp-validation-for="PaymentReference"></span>
                        </div>

                        <div class="col-12">
                            <div class="form-floating">
                                <textarea asp-for="InvoiceDescription" class="form-control" style="min-height: 120px" placeholder="Ø´Ø±Ø­ ÙØ§Ú©ØªÙˆØ±"></textarea>
                                <label asp-for="InvoiceDescription"></label>
                            </div>
                            <span class="text-danger" asp-validation-for="InvoiceDescription"></span>
                        </div>

                        <div class="col-12">
                            <div class="form-floating">
                                <textarea asp-for="TransactionDescription" class="form-control" style="min-height: 120px" placeholder="ØªÙˆØ¶ÛŒØ­ ØªØ±Ø§Ú©Ù†Ø´"></textarea>
                                <label asp-for="TransactionDescription"></label>
                            </div>
                            <span class="text-danger" asp-validation-for="TransactionDescription"></span>
                        </div>

                        <div class="col-12 d-flex justify-content-end gap-2">
                            <button type="reset" class="btn btn-light">
                                <i class="bi bi-arrow-counterclockwise"></i>
                                Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ ÙØ±Ù…
                            </button>
                            <button type="submit" class="btn btn-primary">
                                <i class="bi bi-wallet2"></i>
                                Ø«Ø¨Øª Ø´Ø§Ø±Ú˜ Ú©ÛŒÙ Ù¾ÙˆÙ„
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="col-12 col-lg-4">
            <div class="card shadow-sm border-0 h-100">
                <div class="card-body p-4">
                    <h2 class="h5 mb-3">Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø«Ø¨Øª Ø´Ø§Ø±Ú˜</h2>
                    <ul class="list-unstyled text-muted small mb-0">
                        <li class="mb-2">
                            <i class="bi bi-person-check ms-1 text-primary"></i>
                            Ø§Ø¨ØªØ¯Ø§ Ú©Ø§Ø±Ø¨Ø± Ù…ÙˆØ±Ø¯Ù†Ø¸Ø± Ø±Ø§ Ø§Ø² ÙÙ‡Ø±Ø³Øª Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯. Ø¯Ø± ØµÙˆØ±Øª ØºÛŒØ± ÙØ¹Ø§Ù„ Ø¨ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø±ØŒ Ø¨Ø±Ú†Ø³Ø¨ Ù…Ø±Ø¨ÙˆØ· Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-cash-stack ms-1 text-success"></i>
                            Ù…Ø¨Ù„Øº Ø´Ø§Ø±Ú˜ Ø¨Ù‡ ÙˆØ§Ø­Ø¯ Ù¾ÙˆÙ„ Ù…Ø´Ø®Øµâ€ŒØ´Ø¯Ù‡ Ø¨Ù‡ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©ÛŒÙ Ù¾ÙˆÙ„ Ø§ÙØ²ÙˆØ¯Ù‡ Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯.
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-receipt ms-1 text-warning"></i>
                            Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø´Ø§Ø±Ú˜ØŒ ÙØ§Ú©ØªÙˆØ± Ùˆ ØªØ±Ø§Ú©Ù†Ø´ Ù¾Ø±Ø¯Ø§Ø®Øª Ù…ÙˆÙÙ‚ Ø¨Ù‡â€ŒØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                        </li>
                        <li>
                            <i class="bi bi-link-45deg ms-1 text-info"></i>
                            Ù¾Ø³ Ø§Ø² Ø«Ø¨ØªØŒ Ø¨Ù‡ ØµÙØ­Ù‡ Ø¬Ø²Ø¦ÛŒØ§Øª ÙØ§Ú©ØªÙˆØ± Ù‡Ø¯Ø§ÛŒØª Ø®ÙˆØ§Ù‡ÛŒØ¯ Ø´Ø¯ ØªØ§ Ø¨ØªÙˆØ§Ù†ÛŒØ¯ ÙˆØ¶Ø¹ÛŒØª Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ ÛŒØ§ Ú†Ø§Ù¾ Ú©Ù†ÛŒØ¯.
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

@section Head {
    <style>
        /* Ensure select2 search box is always visible */
        .select2-container--open .select2-search--dropdown {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            padding: 8px !important;
            border-bottom: 1px solid #e5e7eb !important;
            position: relative !important;
        }
        
        .select2-container--open .select2-search--dropdown .select2-search__field {
            width: 100% !important;
            padding: 8px 12px !important;
            padding-right: 40px !important;
            border: 1px solid #d1d5db !important;
            border-radius: 6px !important;
            font-size: 14px !important;
            direction: rtl !important;
            text-align: right !important;
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
        }
        
        .select2-container--open .select2-search--dropdown .select2-search__field:focus {
            outline: none !important;
            border-color: #6366f1 !important;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1) !important;
        }
        
        .select2-container--open .select2-search--dropdown .select2-search__field::placeholder {
            color: #9ca3af !important;
        }
        
        /* Hide select2 search icon and add custom one */
        .select2-container--open .select2-search--dropdown .select2-search__field::after {
            content: 'ğŸ”';
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
            opacity: 0.5;
        }
        
        /* Ensure dropdown results container is visible */
        .select2-container--open .select2-results {
            display: block !important;
        }
    </style>
}

@section Scripts {
    <script src="~/js/admin/wallets.js" asp-append-version="true"></script>
}
