@model LogsDtoCloneTest.Application.DTOs.Navigation.NavigationMenuItemDto
@using System.Linq

@{
    var isTopLevel = Model.ParentId == null;
    var hasChildren = Model.Children.Any();
}

@if (isTopLevel)
{
    <li class="nav-item @(hasChildren ? "dropdown" : "")">
        @if (hasChildren)
        {
            <a class="nav-link dropdown-toggle" href="@Model.Url" id="navbarDropdown@(Model.Id)" role="button" data-bs-toggle="dropdown" aria-expanded="false" @(Model.OpenInNewTab ? "target=\"_blank\" rel=\"noopener noreferrer\"" : "")>
                @if (!string.IsNullOrWhiteSpace(Model.ImageUrl))
                {
                    <span class="nav-link-icon nav-link-icon--image">
                        <img src="@Model.ImageUrl" alt="@Model.Title" />
                    </span>
                }
                else if (!string.IsNullOrWhiteSpace(Model.Icon))
                {
                    <span class="nav-link-icon">@Html.Raw(Model.Icon)</span>
                }
                <span>@Model.Title</span>
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarDropdown@(Model.Id)">
                @foreach (var child in Model.Children.OrderBy(c => c.DisplayOrder).ThenBy(c => c.Title))
                {
                    @await Html.PartialAsync("~/Views/Shared/Components/NavigationMenu/_DefaultNavMenuItem.cshtml", child)
                }
            </ul>
        }
        else
        {
            <a class="nav-link" href="@Model.Url" @(Model.OpenInNewTab ? "target=\"_blank\" rel=\"noopener noreferrer\"" : "")>
                @if (!string.IsNullOrWhiteSpace(Model.ImageUrl))
                {
                    <span class="nav-link-icon nav-link-icon--image">
                        <img src="@Model.ImageUrl" alt="@Model.Title" />
                    </span>
                }
                else if (!string.IsNullOrWhiteSpace(Model.Icon))
                {
                    <span class="nav-link-icon">@Html.Raw(Model.Icon)</span>
                }
                <span>@Model.Title</span>
            </a>
        }
    </li>
}
else
{
    <li class="@(hasChildren ? "dropdown dropend" : "")">
        @if (hasChildren)
        {
            <a class="dropdown-item dropdown-toggle" href="@Model.Url" id="navbarDropdown@(Model.Id)" role="button" data-bs-toggle="dropdown" aria-expanded="false" @(Model.OpenInNewTab ? "target=\"_blank\" rel=\"noopener noreferrer\"" : "")>
                <span class="dropdown-item-text">@Model.Title</span>
                @if (!string.IsNullOrWhiteSpace(Model.ImageUrl))
                {
                    <span class="dropdown-item-icon dropdown-item-icon--image">
                        <img src="@Model.ImageUrl" alt="@Model.Title" />
                    </span>
                }
                else if (!string.IsNullOrWhiteSpace(Model.Icon))
                {
                    <span class="dropdown-item-icon">@Html.Raw(Model.Icon)</span>
                }
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarDropdown@(Model.Id)">
                @foreach (var child in Model.Children.OrderBy(c => c.DisplayOrder).ThenBy(c => c.Title))
                {
                    @await Html.PartialAsync("~/Views/Shared/Components/NavigationMenu/_DefaultNavMenuItem.cshtml", child)
                }
            </ul>
        }
        else
        {
            <a class="dropdown-item" href="@Model.Url" @(Model.OpenInNewTab ? "target=\"_blank\" rel=\"noopener noreferrer\"" : "")>
                <span class="dropdown-item-text">@Model.Title</span>
                @if (!string.IsNullOrWhiteSpace(Model.ImageUrl))
                {
                    <span class="dropdown-item-icon dropdown-item-icon--image">
                        <img src="@Model.ImageUrl" alt="@Model.Title" />
                    </span>
                }
                else if (!string.IsNullOrWhiteSpace(Model.Icon))
                {
                    <span class="dropdown-item-icon">@Html.Raw(Model.Icon)</span>
                }
            </a>
        }
    </li>
}
